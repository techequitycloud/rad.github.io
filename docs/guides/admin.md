# Admin Guide

Welcome to the Admin Guide. This guide provides an overview of the platform administration features available to you.

## 1. Managing Deployments

As an administrator, you have an expanded view of the **Deployments** page. In addition to the "My Deployments" tab, which shows the modules you have personally deployed, you also have access to the "All Deployments" tab, which shows a list of every module deployed by all users across the platform.

### 1.1. Navigating the Dashboard

- **Search:** You can search for specific deployments by a module's name, its deployment ID, the associated project ID, or the email of the user who initiated the deployment.
- **Create New Deployment:** To deploy a new module, click the **Create New** button. This will take you to the module selection screen.
- **Deployment List:** The main area of the page lists deployments with key information such as the module name, status, creation date, and associated project ID. You can click on any deployment to view more details.
- **Pagination:** If there are many deployments, you can navigate through the pages using the controls at the bottom of the list.

## 2. Global Settings (Admin Page)

Administrators have access to a special **Admin** page for configuring global, platform-wide settings.

This page allows you to set up the foundational configurations for the platform, including:

- **Mailbox Credentials:** Configure the credentials for the email service used to send platform notifications.
- **Deployment Retention:** Set the retention period for how long deployment history is stored.
- **Cleanup Schedule:** Configure the schedule (Daily, Weekly, or Monthly) for automatically cleaning up deployment records that are older than the retention period.
- **Feature Flags:** Enable or disable major features like **Credits** and **Subscriptions**.
- **Other Global Variables:** Set other system-wide variables that control the application's behavior.

## 3. Billing and Revenue (Billing Page)

The **Billing** page provides administrators with a comprehensive overview of the platform's finances. It is organized into several tabs:

- **Subscription Tiers:** Create, edit, and manage the subscription tiers offered to users. You can define the price, the number of credits included, and the billing period for each tier.
- **Project Costs:** View an aggregated breakdown of the costs incurred by all projects across the platform.
- **Module Revenue:** Track the total revenue generated from deployments of each specific module.
- **User Revenue:** Analyze the revenue generated by each individual user.
- **Agent Revenue:** If the Agent program is active, this tab shows the revenue generated by users who were referred by agents.
- **Project Invoices:** View and manage monthly invoices for projects.

## 4. User and Credit Management (Credit Settings Page)

The **Credit Settings** page is the central hub for managing all users and credit-related configurations.

### 4.1. Global Credit Settings

This section contains forms for managing global credit settings:

- **Adjust All User Credits:** Grant or deduct credits for all users at once, specifying whether to affect their "Awarded" or "Purchased" balances.
- **Price Per Credit:** Set the conversion rate for how many credits are equivalent to one unit of currency (e.g., USD).
- **Sign Up Credits:** Define the number of free credits a new user receives upon signing up.
- **Low Credit Alerts:** Set the credit balance threshold at which a user receives a low-credit notification email.
- **Send Message:** Send a custom message to all users or a select group of users.

### 4.2. Individual User Management

This section provides a list of all users on the platform. Administrators can:

- **Search:** Find specific users by searching for their email address.
- **View User Information:** See each user's email and their balance of "Awarded", "Purchased", and "Partner" credits.
- **Edit User Credits:** Click the **Edit** button next to a user to manually adjust their credit balances.

#### 4.2.1. How Partner Credits Work

The Partner Credits feature allows you to grant a recurring monthly credit allowance to users.

- **Setting the Allowance:** As an administrator, you can set a numeric value in the "Partner" column for any user. This value represents the monthly allowance of credits the user is entitled to receive.
- **Automated Monthly Granting:** A scheduled job runs automatically at the beginning of every month. It checks each user's allowance and, if it's greater than zero, adds that amount directly to their **"Purchased"** credit balance.
- **Usage and Restrictions:** Once awarded, Partner Credits are functionally identical to credits a user has purchased. They can be used for any deployment, including modules that require purchased credits.
- **Audit Trail:** A transaction history entry with the type "PARTNER" is created each time the monthly allowance is granted, providing a clear audit trail.

## 5. Managing Your Profile

The **Profile** page allows you to manage your personal information and settings.

### 5.1. Profile Information

This section displays your basic profile information, as provided by the authentication system.

### 5.2. Email Notification Settings

You can control which email notifications you receive from the application for deployments and billing.

### 5.3. Configuring the Platform's GitHub Repository

As an administrator, you are responsible for setting up the global repository that hosts the **Platform Modules**.

1.  **Navigate to Profile:** Go to your profile page.
2.  **Provide a GitHub Token:** In the "Admin Settings" section, enter a GitHub Personal Access Token. This token needs `repo` scope to access the repositories.
3.  **Select the Repository:** After saving the token, a dropdown list of your available repositories will appear. Select the repository that contains the platform modules.

This repository will now be the source for all modules available to all users.

### 5.4. Deleting Your Account

At the bottom of the page, you will find an option to permanently delete your account. This action is irreversible.

## 6. Deployment Analysis

Clicking on a **Deployment ID** from the Deployments page opens a detailed view for in-depth analysis and troubleshooting.

### 6.1. Deployment Details

This section provides a summary of the deployment's core information, including:
- Final Status (e.g., SUCCESS or FAILURE).
- Creation and completion times.
- A key-value list of all configuration parameters used for the deployment.

### 6.2. Log Viewer

The most critical feature of this view is the **Log Viewer**, which streams logs directly from the backend build process in real-time. It allows you to:
- **Track Progress:** See the distinct stages of the deployment pipeline as they happen.
- **Diagnose Errors:** The log output will clearly show failed steps and error messages from underlying tools (like Terraform), allowing for efficient root cause analysis.

## 7. Help and Support

The **Help** page is your central resource for documentation and support. It contains:

- **User Guides:** Access to the Admin, Partner, Agent, and User guides.
- **Support Form:** A form to send a message directly to the support team or to specific users.

## 8. Theme Customization

You can switch between light and dark themes to suit your preference. The theme selector is located in the user menu in the top-right corner of the navigation bar.

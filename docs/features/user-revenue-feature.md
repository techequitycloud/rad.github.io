# User Revenue Feature

The User Revenue feature is a comprehensive tool designed to track, calculate, and visualize the revenue generated by platform users through their deployments. This feature is essential for Finance teams to monitor platform performance and for Agents to track the revenue generated by their referred users.

## Overview

The User Revenue interface provides a detailed breakdown of revenue generation at the user level. It allows authorized roles to see which users are deploying modules, the number of deployments they have running, and the "true revenue" those deployments are generating.

## Key Concepts

### True Revenue Calculation
The core of this feature is the calculation of **True Revenue**. The platform distinguishes between credits that are *awarded* (free credits given to users) and credits that are *purchased*.

"True Revenue" represents the actual financial value generated from deployments, excluding any costs covered by free or awarded credits.

The calculation logic is as follows:
1.  For each deployment, the system determines the cost.
2.  It checks the user's available "Awarded Credits" balance.
3.  **True Revenue** = `Deployment Cost` - `Awarded Credit Balance`.
    *   If the user has enough awarded credits to cover the cost, the True Revenue is **0**.
    *   Any cost in excess of the awarded credits is counted as True Revenue, as it implies the usage of purchased credits.

### Revenue Shares
The system calculates revenue shares based on user roles:
*   **Agent Revenue Share:** Calculated for Agents based on the revenue generated by users they have referred.
*   **Partner Revenue Share:** Calculated for Partners based on the revenue generated by their published modules.

## Roles and Access

Access to the User Revenue data is governed by user roles:

### 1. Finance & Admin
*   **Access:** Full access to all user revenue data across the entire platform.
*   **View:** Can see every user, their total deployments, and the total revenue generated.
*   **Purpose:** Overall platform financial health monitoring and reporting.

### 2. Agents
*   **Access:** Restricted access limited to their specific referral network.
*   **View:** Can only see data for users who have listed them as their referrer (via the `referredBy` field).
*   **Purpose:** To track the performance and commission basis of their referred user base.

## Using the Interface

The User Revenue tab is located within the **Billing** section of the application.

### Features
*   **User List:** A tabular view displaying:
    *   **User:** The email address of the user.
    *   **Role:** The user's role (e.g., User, Partner, Agent).
    *   **Total Deployments:** The number of active deployments for that user.
    *   **Total Revenue:** The calculated True Revenue generated by that user.
*   **Search:** A search bar allows you to quickly find specific users by their email address.
*   **Date Filtering:** You can filter the revenue data by a specific date range (Start Date and End Date) to view performance over specific periods (e.g., monthly or quarterly).
*   **Pagination:** The list is paginated to handle large numbers of users efficiently.

## How to Access
1.  Navigate to the **Billing** page via the main navigation menu.
2.  Click on the **User Revenue** tab.
